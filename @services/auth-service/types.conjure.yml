types:
  definitions:
    default-package: com.culty.services.auth

    objects:
      LoginEmailPasswordRequest:
        fields:
          email: string
          password: string

      SignUpEmailPasswordRequest:
        fields:
          email: string
          password: string

      RefreshTokenRequest:
        fields:
          refreshToken: string
          antiCsrfToken: string

      Token:
        fields:
          token: string
          expiresAt: integer

      LoginResponse:
        fields:
          userId: string
          accessToken: Token
          refreshToken: Token
          antiCsrfToken: string

      VerifyAccessTokenRequest:
        fields:
          accessToken: string
          antiCsrfToken: string

      VerifyAccessTokenResponse:
        fields:
          userId: string

    errors:
      BadCredentials:
        namespace: AuthService
        code: PERMISSION_DENIED

services:
  AuthService:
    name: AuthService
    package: com.culty.services.auth
    endpoints:
      loginEmailPassword:
        http: POST /loginEmailPassword
        args:
          request: LoginEmailPasswordRequest
        returns: LoginResponse

      signUpEmailPassword:
        http: POST /signUpEmailPassword
        args:
          request: SignUpEmailPasswordRequest
        returns: LoginResponse

      refreshToken:
        http: POST /refreshToken
        args:
          request: RefreshTokenRequest
        returns: LoginResponse

      verifyAccessToken:
        http: POST /verifyAccessToken
        args:
          request: VerifyAccessTokenRequest
        returns: VerifyAccessTokenResponse
